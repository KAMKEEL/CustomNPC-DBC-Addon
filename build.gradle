//version: 1707058017

plugins {
    id 'com.gtnewhorizons.gtnhconvention'
}

group= "kamkeel.npcdbc"

tasks.runServer { setWorkingDir(file("run/server")) }

version = "1.1.4"
group= "kamkeel.npcdbc"
archivesBaseName = "npcdbc"

def findJarBySubstring = { part ->
    def matches = configurations.runtimeClasspath.filter { it.name.contains(part) }

    if (matches.isEmpty()) {
        throw new GradleException("Cannot find JAR containing '${part}' in runtimeClasspath")
    }

    return matches.first() // valid in old Gradle
}

//sourceSets {
//    named("main").configure {
//        java {
//            srcDirs += ['janino/src/main/java', 'janino/annotationProcessor/src/main/java']
//        }
//    }
//}

tasks.named("runClient").configure {
    def agent = findJarBySubstring("unimixins")
    extraJvmArgs.addAll("-javaagent:${agent.absolutePath}")

}

